name: PR CI (fork-safe wrapper)
on:
  pull_request_target:
    types: [opened, reopened, synchronize]
    paths:
      - 'backend/**'
      - 'data/**'
      - 'test/backend_tests/**'
      - 'test/data_tests/**'
      - 'pyproject.toml'

permissions:
  contents: read        # least privilege; do NOT add secrets

jobs:
  run:
    uses: ./.github/workflows/backend-action.yml
    with:
      pr_repo: ${{ github.repository }}             # "owner/repo"
      pr_ref:  refs/pull/${{ github.event.pull_request.number }}/head  # "refs/pull/42/head"
